import Layout from "../../components/layout/layout";
import style from "../../styles/Home.module.scss";
import Image from "next/image";
import coverPng from "../../public/Image/cover.png";
import Button from "../../components/ui/button";
import { useRouter } from "next/router";
import * as React from "react";
import { GetStaticProps } from "next";
import { DataContext } from "../../store/data-context";
import { useContext, useEffect, useState } from "react";
export interface Data {
  id: number;
  title: string;
  description: string;
  point: number;
  image: string;
}
export interface data {
  data: Data[];
}

const Intro: React.FC<data> = ({ data }) => {
  const router = useRouter();
  const submitHandler = () => {
    router.push("./home");
  };
  let softStarter = true;
  const dataCtx = useContext(DataContext);

  console.log(dataCtx.scoreData);
  console.log("outside index");
  useEffect(() => {
    console.log("intro index");
    if (softStarter) {
      console.log("inside index");
      data.map((data) => {
        dataCtx.addData(data);
      });
      if (localStorage.getItem("intro") === "true") {
        router.push("./home");
      }
      localStorage.setItem("intro", "true");
    }
    softStarter = false;
  }, []);
  return (
    <div className={style.layout_yellow_intro}>
      <div className={style.intro_logo_container}>
        <svg
          width="232"
          height="24"
          viewBox="0 0 232 24"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M7.76475 23V4.824H0.59675V0.599998H20.1168V4.824H12.9488V23H7.76475ZM29.348 23.256C27.3853 23.256 25.6573 22.872 24.164 22.104C22.692 21.336 21.5507 20.2907 20.74 18.968C19.9293 17.624 19.524 16.0987 19.524 14.392C19.524 12.664 19.9187 11.1387 20.708 9.816C21.5187 8.472 22.6173 7.42667 24.004 6.68C25.3907 5.912 26.9587 5.528 28.708 5.528C30.3933 5.528 31.908 5.89067 33.252 6.616C34.6173 7.32 35.6947 8.344 36.484 9.688C37.2733 11.0107 37.668 12.6 37.668 14.456C37.668 14.648 37.6573 14.872 37.636 15.128C37.6147 15.3627 37.5933 15.5867 37.572 15.8H23.588V12.888H34.948L33.028 13.752C33.028 12.856 32.8467 12.0773 32.484 11.416C32.1213 10.7547 31.62 10.2427 30.98 9.88C30.34 9.496 29.5933 9.304 28.74 9.304C27.8867 9.304 27.1293 9.496 26.468 9.88C25.828 10.2427 25.3267 10.7653 24.964 11.448C24.6013 12.1093 24.42 12.8987 24.42 13.816V14.584C24.42 15.5227 24.6227 16.3547 25.028 17.08C25.4547 17.784 26.0413 18.328 26.788 18.712C27.556 19.0747 28.452 19.256 29.476 19.256C30.3933 19.256 31.1933 19.1173 31.876 18.84C32.58 18.5627 33.22 18.1467 33.796 17.592L36.452 20.472C35.6627 21.368 34.6707 22.0613 33.476 22.552C32.2813 23.0213 30.9053 23.256 29.348 23.256ZM46.7835 23.256C45.3115 23.256 43.8928 23.0853 42.5275 22.744C41.1835 22.3813 40.1168 21.9333 39.3275 21.4L40.9915 17.816C41.7808 18.3067 42.7088 18.712 43.7755 19.032C44.8635 19.3307 45.9302 19.48 46.9755 19.48C48.1275 19.48 48.9382 19.3413 49.4075 19.064C49.8982 18.7867 50.1435 18.4027 50.1435 17.912C50.1435 17.5067 49.9515 17.208 49.5675 17.016C49.2048 16.8027 48.7142 16.6427 48.0955 16.536C47.4768 16.4293 46.7942 16.3227 46.0475 16.216C45.3222 16.1093 44.5862 15.9707 43.8395 15.8C43.0928 15.608 42.4102 15.3307 41.7915 14.968C41.1728 14.6053 40.6715 14.1147 40.2875 13.496C39.9248 12.8773 39.7435 12.0773 39.7435 11.096C39.7435 10.008 40.0528 9.048 40.6715 8.216C41.3115 7.384 42.2288 6.73333 43.4235 6.264C44.6182 5.77333 46.0475 5.528 47.7115 5.528C48.8848 5.528 50.0795 5.656 51.2955 5.912C52.5115 6.168 53.5248 6.54133 54.3355 7.032L52.6715 10.584C51.8395 10.0933 50.9968 9.76267 50.1435 9.592C49.3115 9.4 48.5008 9.304 47.7115 9.304C46.6022 9.304 45.7915 9.45333 45.2795 9.752C44.7675 10.0507 44.5115 10.4347 44.5115 10.904C44.5115 11.3307 44.6928 11.6507 45.0555 11.864C45.4395 12.0773 45.9408 12.248 46.5595 12.376C47.1782 12.504 47.8502 12.6213 48.5755 12.728C49.3222 12.8133 50.0688 12.952 50.8155 13.144C51.5622 13.336 52.2342 13.6133 52.8315 13.976C53.4502 14.3173 53.9515 14.7973 54.3355 15.416C54.7195 16.0133 54.9115 16.8027 54.9115 17.784C54.9115 18.8507 54.5915 19.8 53.9515 20.632C53.3115 21.4427 52.3835 22.0827 51.1675 22.552C49.9728 23.0213 48.5115 23.256 46.7835 23.256ZM65.0315 23.256C63.0048 23.256 61.4262 22.744 60.2955 21.72C59.1648 20.6747 58.5995 19.128 58.5995 17.08V1.976H63.5915V17.016C63.5915 17.7413 63.7835 18.3067 64.1675 18.712C64.5515 19.096 65.0742 19.288 65.7355 19.288C66.5248 19.288 67.1968 19.0747 67.7515 18.648L69.0955 22.168C68.5835 22.5307 67.9648 22.808 67.2395 23C66.5355 23.1707 65.7995 23.256 65.0315 23.256ZM55.9435 10.008V6.168H67.8795V10.008H55.9435ZM82.9698 23.384C81.2418 23.384 79.6311 23.1067 78.1378 22.552C76.6658 21.976 75.3858 21.1653 74.2977 20.12C73.2098 19.0747 72.3564 17.848 71.7378 16.44C71.1404 15.032 70.8418 13.4853 70.8418 11.8C70.8418 10.1147 71.1404 8.568 71.7378 7.16C72.3564 5.752 73.2098 4.52533 74.2977 3.48C75.4071 2.43467 76.6978 1.63467 78.1698 1.08C79.6418 0.503999 81.2524 0.216 83.0018 0.216C84.9431 0.216 86.6924 0.557333 88.2498 1.24C89.8284 1.90133 91.1511 2.88267 92.2178 4.184L88.8898 7.256C88.1218 6.38133 87.2684 5.73067 86.3298 5.304C85.3911 4.856 84.3671 4.632 83.2578 4.632C82.2124 4.632 81.2524 4.80267 80.3778 5.144C79.5031 5.48533 78.7458 5.976 78.1058 6.616C77.4658 7.256 76.9644 8.01333 76.6018 8.888C76.2604 9.76267 76.0898 10.7333 76.0898 11.8C76.0898 12.8667 76.2604 13.8373 76.6018 14.712C76.9644 15.5867 77.4658 16.344 78.1058 16.984C78.7458 17.624 79.5031 18.1147 80.3778 18.456C81.2524 18.7973 82.2124 18.968 83.2578 18.968C84.3671 18.968 85.3911 18.7547 86.3298 18.328C87.2684 17.88 88.1218 17.208 88.8898 16.312L92.2178 19.384C91.1511 20.6853 89.8284 21.6773 88.2498 22.36C86.6924 23.0427 84.9324 23.384 82.9698 23.384ZM105.833 23V19.64L105.513 18.904V12.888C105.513 11.8213 105.182 10.9893 104.521 10.392C103.881 9.79467 102.889 9.496 101.545 9.496C100.627 9.496 99.7208 9.64533 98.8248 9.944C97.9501 10.2213 97.2034 10.6053 96.5848 11.096L94.7928 7.608C95.7314 6.94667 96.8621 6.43467 98.1848 6.072C99.5074 5.70933 100.851 5.528 102.217 5.528C104.841 5.528 106.878 6.14667 108.329 7.384C109.779 8.62133 110.505 10.552 110.505 13.176V23H105.833ZM100.585 23.256C99.2408 23.256 98.0888 23.032 97.1288 22.584C96.1688 22.1147 95.4328 21.4853 94.9208 20.696C94.4088 19.9067 94.1528 19.0213 94.1528 18.04C94.1528 17.016 94.3981 16.12 94.8888 15.352C95.4008 14.584 96.2008 13.9867 97.2888 13.56C98.3768 13.112 99.7954 12.888 101.545 12.888H106.121V15.8H102.089C100.915 15.8 100.105 15.992 99.6568 16.376C99.2301 16.76 99.0168 17.24 99.0168 17.816C99.0168 18.456 99.2621 18.968 99.7528 19.352C100.265 19.7147 100.958 19.896 101.833 19.896C102.665 19.896 103.411 19.704 104.073 19.32C104.734 18.9147 105.214 18.328 105.513 17.56L106.281 19.864C105.918 20.9733 105.257 21.816 104.297 22.392C103.337 22.968 102.099 23.256 100.585 23.256ZM120.815 23.256C119.343 23.256 117.924 23.0853 116.559 22.744C115.215 22.3813 114.148 21.9333 113.359 21.4L115.023 17.816C115.812 18.3067 116.74 18.712 117.807 19.032C118.895 19.3307 119.961 19.48 121.007 19.48C122.159 19.48 122.969 19.3413 123.439 19.064C123.929 18.7867 124.175 18.4027 124.175 17.912C124.175 17.5067 123.983 17.208 123.599 17.016C123.236 16.8027 122.745 16.6427 122.127 16.536C121.508 16.4293 120.825 16.3227 120.079 16.216C119.353 16.1093 118.617 15.9707 117.871 15.8C117.124 15.608 116.441 15.3307 115.823 14.968C115.204 14.6053 114.703 14.1147 114.319 13.496C113.956 12.8773 113.775 12.0773 113.775 11.096C113.775 10.008 114.084 9.048 114.703 8.216C115.343 7.384 116.26 6.73333 117.455 6.264C118.649 5.77333 120.079 5.528 121.743 5.528C122.916 5.528 124.111 5.656 125.327 5.912C126.543 6.168 127.556 6.54133 128.367 7.032L126.703 10.584C125.871 10.0933 125.028 9.76267 124.175 9.592C123.343 9.4 122.532 9.304 121.743 9.304C120.633 9.304 119.823 9.45333 119.311 9.752C118.799 10.0507 118.543 10.4347 118.543 10.904C118.543 11.3307 118.724 11.6507 119.087 11.864C119.471 12.0773 119.972 12.248 120.591 12.376C121.209 12.504 121.881 12.6213 122.607 12.728C123.353 12.8133 124.1 12.952 124.847 13.144C125.593 13.336 126.265 13.6133 126.863 13.976C127.481 14.3173 127.983 14.7973 128.367 15.416C128.751 16.0133 128.943 16.8027 128.943 17.784C128.943 18.8507 128.623 19.8 127.983 20.632C127.343 21.4427 126.415 22.0827 125.199 22.552C124.004 23.0213 122.543 23.256 120.815 23.256ZM140.567 23.256C138.604 23.256 136.876 22.872 135.383 22.104C133.911 21.336 132.769 20.2907 131.959 18.968C131.148 17.624 130.743 16.0987 130.743 14.392C130.743 12.664 131.137 11.1387 131.927 9.816C132.737 8.472 133.836 7.42667 135.223 6.68C136.609 5.912 138.177 5.528 139.927 5.528C141.612 5.528 143.127 5.89067 144.471 6.616C145.836 7.32 146.913 8.344 147.703 9.688C148.492 11.0107 148.887 12.6 148.887 14.456C148.887 14.648 148.876 14.872 148.855 15.128C148.833 15.3627 148.812 15.5867 148.791 15.8H134.807V12.888H146.167L144.247 13.752C144.247 12.856 144.065 12.0773 143.703 11.416C143.34 10.7547 142.839 10.2427 142.199 9.88C141.559 9.496 140.812 9.304 139.959 9.304C139.105 9.304 138.348 9.496 137.687 9.88C137.047 10.2427 136.545 10.7653 136.183 11.448C135.82 12.1093 135.639 12.8987 135.639 13.816V14.584C135.639 15.5227 135.841 16.3547 136.247 17.08C136.673 17.784 137.26 18.328 138.007 18.712C138.775 19.0747 139.671 19.256 140.695 19.256C141.612 19.256 142.412 19.1173 143.095 18.84C143.799 18.5627 144.439 18.1467 145.015 17.592L147.671 20.472C146.881 21.368 145.889 22.0613 144.695 22.552C143.5 23.0213 142.124 23.256 140.567 23.256ZM158.892 23L168.684 0.599998H176.108L185.9 23H178.092L170.86 4.184H173.804L166.572 23H158.892ZM164.716 19.096L166.636 13.656H176.94L178.86 19.096H164.716ZM187.105 23V0.599998H197.889C199.98 0.599998 201.783 0.941332 203.297 1.624C204.833 2.30667 206.017 3.288 206.849 4.568C207.681 5.82667 208.097 7.32 208.097 9.048C208.097 10.776 207.681 12.2693 206.849 13.528C206.017 14.7867 204.833 15.768 203.297 16.472C201.783 17.1547 199.98 17.496 197.889 17.496H191.297L194.657 14.264V23H187.105ZM194.657 15.096L191.297 11.672H197.409C198.455 11.672 199.223 11.4373 199.713 10.968C200.225 10.4987 200.481 9.85867 200.481 9.048C200.481 8.23733 200.225 7.59733 199.713 7.128C199.223 6.65867 198.455 6.424 197.409 6.424H191.297L194.657 3V15.096ZM210.574 23V0.599998H221.358C223.449 0.599998 225.251 0.941332 226.766 1.624C228.302 2.30667 229.486 3.288 230.318 4.568C231.15 5.82667 231.566 7.32 231.566 9.048C231.566 10.776 231.15 12.2693 230.318 13.528C229.486 14.7867 228.302 15.768 226.766 16.472C225.251 17.1547 223.449 17.496 221.358 17.496H214.766L218.126 14.264V23H210.574ZM218.126 15.096L214.766 11.672H220.878C221.923 11.672 222.691 11.4373 223.182 10.968C223.694 10.4987 223.95 9.85867 223.95 9.048C223.95 8.23733 223.694 7.59733 223.182 7.128C222.691 6.65867 221.923 6.424 220.878 6.424H214.766L218.126 3V15.096Z"
            fill="black"
          />
        </svg>
        <p className={style.intro_logo_text}>Pixel Perfect</p>
      </div>
      <div className={style.intro_img_container}>
        <Image src={coverPng} width={300} height={272} alt="Cover Page" />
      </div>
      <div className={style.intro_welcome_container}>
        <div className={style.intro_wrapper}>
          <div className={style.intro_container_body}>
            <h1 className={style.intro_footer_heading}>
              Welcome to the TestCase APP!
            </h1>
            <p className={style.intro_footer_text}>
              We created this exercise to gain insights about your development
              skills.
            </p>
            <div className={style.intro_footer_container}>
              <Button onClick={submitHandler}>Start</Button>
            </div>
          </div>
        </div>
      </div>
    </div>
  );
};
export const getStaticProps: GetStaticProps = async () => {
  const response = await fetch(
    "https://cdn.mallconomy.com/testcase/actions.json"
  );
  const data = await response.json();
  return {
    props: {
      data,
    },
    revalidate: 600,
  };
};

export default Intro;
